2007-12-29  Richard Hughes  <richard@hughsie.com>

	* pm/functions:
	* src/pm-powersave:
	Red Hat Bugzilla: https://bugzilla.redhat.com/show_bug.cgi?id=302401
	(Issue 2 in the bug report)

	Without the uniq files in the sleep.d or power.d directory may run twice.
	Also this patch removes a uneccessary "-e" test in the if statements, the
	"-x" test already includes a "-e" test.

	Also this patch adds a modeline for vim no to expand tabs, because tabs are
	used in the files for indentation.
	From Till Maas <opensource@till.name>, many thanks.

2007-12-29  Richard Hughes  <richard@hughsie.com>

	* pm/functions:
	* src/pm-powersave:
	Red Hat Bugzilla: https://bugzilla.redhat.com/show_bug.cgi?id=302401
	(Issue 1 in the bug report)
	This patch makes sure that the nullglob option is set. This makes
	sure that the result of a filename expansion is empty, when the
	pattern does not match.
	From Till Maas <opensource@till.name>, many thanks.

2007-12-29  Richard Hughes  <richard@hughsie.com>

	* src/pm-action:
	This patch makes pm-action show the filename in help, that was used
	to invoke it, e.g. pm-suspend
	From Till Maas <opensource@till.name>, many thanks.

2007-12-23  Richard Hughes  <richard@hughsie.com>

	* man/pm-pmu.1:
	* man/pm-pmu.sgml:
	Fix a typo in the pm-pmu manpage.
	RedHat Bugzilla report: https://bugzilla.redhat.com/show_bug.cgi?id=286201

2007-12-23  Richard Hughes  <richard@hughsie.com>

	* pm/functions:
	There is no need to remove the logfile, because the ">" after exec in
	the next line already truncates the logfile to zero length.
	Also removing is wrong, because it destroys the selinux context of the
	logfile. Bugzilla Reports:
	https://bugzilla.redhat.com/show_bug.cgi?id=237840
	https://bugzilla.redhat.com/show_bug.cgi?id=238068

2007-12-23  Richard Hughes  <richard@hughsie.com>

	* pm/functions:
	- Check for the individual config file, not the list.

2007-09-10  Peter Jones  <pjones@redhat.com>

	* configure.in:
	- bump minor rev

2007-08-13  Peter Jones  <pjones@redhat.com>

	* pm/power.d/laptop-tools:
	- remove this entirely, it doesn't make any sense.

2007-06-18  Peter Jones  <pjones@redhat.com>

	* pm/hooks/99video src/pm-action:
	Add support for "--quirk-reset-brightness" (fixes the Fujitsu
	Lifebook S7110)

2007-06-04  Richard Hughes  <richard@hughsie.com>

	* pm/hooks/20video:
	We are not turning off the DAC and light in 20video, but we are
	turning it on in 99video. Fix.

2007-05-15  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- export config variables from pm/functions as well (patch from
	  Stefan)

	* man/Makefile.am:
	- only clean up man pages on mainainter-clean, not on normal
	  clean (Patch from Tim Dijkstra <newsuser@famdijkstra.org>)

2007-03-26  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- fix source_configs so it doesn't throw an error when the config
	  dir is empty.  (this will be tagged with .3)

2007-03-26  Peter Jones  <pjones@redhat.com>

	* configure.in:
	- bump version to 0.99.3.  Still need to have a good look at Stefan's
	  s2both stuff before release, as well as re-examining the video hook.

2007-03-16  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- work around broken regexps in some versions of bash, also fewer
	  forks ;) (patch from Stefan)

2007-03-16  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- get rid of the complicated config stuff; the new layout obviates the
	  need for it (patch from Stefan)

2007-03-14  Peter Jones  <pjones@redhat.com>

	* pm/power.d/laptop-tools:
	- fix path for "functions"

2007-03-14  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- fix use of "service" vs /etc/init.d/$x (based on input from Tim
	  Dijkstra, Stefan, and Caglar Onur)

2007-03-14  Peter Jones  <pjones@redhat.com>

	* pm/defaults:
	- alphabetize

	* pm/functions:
	- add TEMPORARY_CPUFREQ_GOVERNOR and a default for it.

	* pm/hooks/94cpufreq:
	- don't change any cpu's governor until we've saved them
	  all (based on a patch from Frank Seidel via Stefan)

2007-03-14  Peter Jones  <pjones@redhat.com>

	* pm/defaults:
	- add comment text (from Stefan)
	- remove default "button" removal, it's no longer needed (from Stefan)

	* src/pm-reset-swap.c:
	- handle ulsuspend signature (from Stefan)
	- fix errant "rc = 1;" (from Stefan)

	* pm/functions:
	- make stopservice and restartservice work with dashes and
	  underscores (from Stefan)

2007-03-13  Peter Jones  <pjones@redhat.com>

	* configure.in:
	- bump version to 0.99.2

2007-03-13  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- add do_suspend_hybrid function

	* src/pm-action:
	- handle pm-suspend-hybrid (by exiting with error status)

	* src/pm-is-supported:
	- add this file

	* src/Makefile.am:
	- add pm-is-supported

2007-03-06  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- add /usr/lib/pm-utils/bin to $PATH

2007-03-06  Peter Jones  <pjones@redhat.com>

	* pm/hooks/00clear pm/hooks/00logging pm/hooks/10NetworkManager
	* pm/hooks/20video pm/hooks/49bluetooth pm/hooks/50modules
	* pm/hooks/55battery pm/hooks/60sysfont pm/hooks/65alsa
	* pm/hooks/90clock pm/hooks/94cpufreq pm/hooks/99video:
	- get the path for "functions" right.

2007-03-06  Peter Jones  <pjones@redhat.com>

	* configure.in:
	- bump version to 0.99.1

2007-03-06  Peter Jones  <pjones@redhat.com>

	* pm/Makefile.am:
	- rename "config" to "defaults"
	- use $(libdir)/pm-utils instead of $(sysconfdir)

	* pm/config pm/defaults:
	- rename "config" to "defaults"

	* pm/functions:
	- rename "config" to "defaults", and look for it in usr/lib/pm-utils
	- handle the new "two directories" style sleep.d 

	* pm/hooks/Makefile.am:
	- make both sleep.d directories, but put our stuff in /usr/lib

	* pm/power.d/Makefile.am:
	- make both power.d directories, but put our stuff in /usr/lib

	* src/Makefile.am:
	- move locatons of files around to fit the new layout

	* src/pm-action:
	- changes for new layout

	* src/pm-powersave:
	- handle the new "two directories" style power.d 

2007-03-06  Peter Jones  <pjones@redhat.com>

	* pm/hooks/05led:
	- use "bash" not "sh"

	* pm/hooks/10NetworkManager:
	- use "bash" not "sh"

	* pm/hooks/90clock:
	- use "bash" not "sh"

	* pm/hooks/95led:
	- use "bash" not "sh"

2007-03-01  Peter Jones  <pjones@redhat.com>

	* pm/hooks/20video pm/hooks/99video:
	- fix shell quoting in variable tests

2007-03-01  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- fix use of [ with =~

2007-03-01  Peter Jones  <pjones@redhat.com>

	* pm/hooks/55battery:
	- use hal-set-property not hal-device
	- just do everything on resume/thaw, don't bother with saving state

2007-03-01  Peter Jones  <pjones@redhat.com>

	* pm/hooks/10NetworkManager: minor cleanups

2007-02-28  Peter Jones  <pjones@redhat.com>

	* pm/hooks/55battery: hook to reprobe batteries on hibernate/thaw,
	because the acpi event gets eaten by the boot kernel.

	* pm/hooks/Makefile.am: add 55battery here

2007-02-20  Peter Jones  <pjones@redhat.com>

	* man/Makefile.am: docbook2man doesn't output the man page on standard
	output, it outputs it to ${NAME%.sgml}.1 .  So redirecting stdout to
	${NAME%.sgml}.1 gets "Done.\n" stuck somewhere in the middle of the
	file.  Don't do this.

2007-02-20  Peter Jones  <pjones@redhat.com>

	* pm/hooks/20video: split resume/thaw out to another script

	* pm/hooks/99video: split resume/thaw out to another script

	* pm/hooks/Makefile.am: add 99video here

2007-02-20  Peter Jones  <pjones@redhat.com>

	* configure.in: Change version to 0.99.0

2007-02-20  Peter Jones  <pjones@redhat.com>

	* src/pm-action: Add error messages when we're exiting because of
	missing data in sysfs.

2007-02-20  Peter Jones  <pjones@redhat.com>

	* src/pm-powersave: handle emacs files like we do in pm/functions

2007-02-20  Peter Jones  <pjones@redhat.com>

	* src/pm-action: handle options for video quirks

	* pm/hooks/20video: use video quirk options (based largely on a
	patch from Richard Hughes)

2007-02-20  Peter Jones  <pjones@redhat.com>

	* pm/functions: fix module load/unload problems with module names
	that have - and _ .

2007-01-30  Peter Jones  <pjones@redhat.com>

	* pm/hooks/65alsa: Add a hook to save and restore alsa settings (patch
	from Phil Knirsch).

	* pm/hooks/60sysfont: Add a hook to reset the sysfont on resume,
	originally by Phill Knirsch (rhbz #215391).

	* pm/hooks/10NetworkManager: remove the service changes for
	mDNSresponder.  It hasn't been named that in a while, so that part
	of the hook hasn't been doing anything at all (rhbz #215253).

	* pm/power.d/laptop-tools: fix permission checking (patch from Phil
	Knirsch, rhbz #222819)

2007-01-29  Peter Jones  <pjones@redhat.com>

	* src/pm-reset-swap.c:
	- add this file, a utility to reset the hibernate signature on a swap
	  device.

2007-01-02  Peter Jones  <pjones@redhat.com>

	* pm/power.d/sched-powersave:
	* pm/power.d/Makefile.am:
	- add a powersave script for kernel scheduler configuration (originally
	  from Richard with some changes by me)

2006-12-05  Peter Jones  <pjones@redhat.com>

	* src/on_ac_power:
	- Don't use batteries as an indicator, since they're present in
	  e.g. wireless mice, as well as other devices.  (patch from Stefan)

2006-11-30  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- log when we're done running hooks (from Stefan)
	- don't discard service start/stop output. (from Stefan)

2006-11-29  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- source_configs rewrite from Stefan.

2006-11-28  Peter Jones  <pjones@redhat.com>

	* pm/hooks/94cpufreq:
	- Enable for suspend/resume as well.

2006-11-14  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- Sort the globals, and add some comments about their initialization.
	- Fix logging of hook names (patch from Holger Macht).

	* pm/hooks/00logging:
	- If PM_LOGFILE is set, log kernel version, modules loaded, and memory
	  usage info (patch from Holger Macht).

2006-10-31  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- don't initialize RESUME_MODULES, it'll clobber our list
	- add support for hooks to inhibit suspending (seife,pjones)

	* src/pm-action: call pm_main with both forward and reverse actions

2006-10-30  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- use PM_LOGFILE rather than LOGFILE, and inherit from env
	- exec to set the logfile for the current process

2006-10-21  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	- Merge logging infrastructure from Stefan Seyfried.
	- Rework module load/unload (pjones,seife)

	* pm/hooks/50modules: use the right module list in resume_modules.

2006-10-11  Peter Jones  <pjones@redhat.com>

	* pm/functions: fix missing decrement in reverse-hooks loop.

2006-10-10  Peter Jones  <pjones@redhat.com>

	* pm/functions: 
	- don't source /etc/rc.d/init.d/functions, we don't need it
	- set sane script-wide path
	- use "read" instead of "cat" to read /.suspended
	- use globbing to exclude emacs's litter
	- use shell not awk to do the hook reversal
	- don't specify full paths for programs in PATH

2006-09-28  Peter Jones  <pjones@redhat.com>

	* pm/functions: ignore emacs backup files in config dirs

	* src/pm-powersave: ditto

2006-06-15  Peter Jones  <pjones@redhat.com>

	* src/pm-pmu.c:
	If we can't write to /dev/pmu, just return 1, so we don't see the open
	open error on platforms without pmu.

2006-06-15  Peter Jones  <pjones@redhat.com>

	* pm/hooks/Makefile.am:
	fix installation directory
	* pm/Makefile.am:
	fix automake rule name so config.d gets made right
	fix installation path for config.d
	* src/Makefile.am:
	fix automake rule name so pm-pmu gets installed right
	put on_ac_power in bindir

2006-06-13  Peter Jones  <pjones@redhat.com>

	* pm/hooks/94cpufreq:
	make sure cpufreq is set to userspace control during hibernate,
	or else we get nasty deadlock issues.
	* pm/hooks/Makefile.am:
	add cpufreq hook

2006-06-12  Peter Jones  <pjones@redhat.com>

	* src/pm-action:
	error if run as non-root

2006-06-05  Richard Hughes  <richard@hughsie.com>

	* src/Makefile.am:
	symlink pm-suspend and pm-hibernate to pm-action

2006-06-05  Richard Hughes  <richard@hughsie.com>

	* configure.in:
	* pm/Makefile.am:
	Create /etc/pm/config.d on package install as this is an empty
	directory for custom configs.

	* src/Makefile.am:
	Build the src, and install the scripts. TODO: symlink the pm-* scripts.

2006-06-05  Richard Hughes  <richard@hughsie.com>

	* INSTALL:
	Add this GNU required file.

	* man/on_ac_power.1:
	* man/pm-pmu.1:
	Newest files (from the SGML files)

	* .cvsignore:
	* man/.cvsignore:
	* pm/.cvsignore:
	* pm/Makefile.am:
	* pm/hooks/.cvsignore:
	* pm/power.d/.cvsignore:
	* src/.cvsignore:
	Add these files to keep cvs happy.

2006-06-05  Richard Hughes  <richard@hughsie.com>

	* Makefile:
	Remove old build system, as Makefile is now autogenerated.

	* Makefile.am:
	* configure.in:
	Add in master build files for the autotooled build system.

2006-06-05  Richard Hughes  <richard@hughsie.com>

	* man/Makefile.am:
	Connect up the sgml->.1 conversion to the autotools build system.

2006-06-05  Richard Hughes  <richard@hughsie.com>

	* MAINTAINERS:
	Add pjones as maintainer.

	* autogen.sh:
	* pm/Makefile.am:
	* pm/hooks/Makefile.am:
	* pm/power.d/Makefile.am:
	Start to add autotools build system.

2006-06-05  Richard Hughes  <richard@hughsie.com>

	* man/on_ac_power.sgml:
	* man/pm-pmu.sgml:
	Don't use hardcoded .1 files, instead generate them using sgml files.

2006-06-05  Richard Hughes  <richard@hughsie.com>

	* NEWS: Add this file for release news. Required for autofoo.

2006-05-17  Richard Hughes  <richard@hughsie.com>

	* .cvsignore:
	Add this file to keep CVS happy.

	* pm/power.d/laptop-tools:
	* Makefile.am:
	Add this folder and file to make the low power actions easy to add.

	* pm-powersave:
	Do not just do hardcoded actions, instead run the scripts in
	/etc/pm/power.d/ with true and false arguments.

2006-05-02  Peter Jones  <pjones@redhat.com>

	* pm-pmu.c: Add a hack for bad system headers.

2006-05-02  Peter Jones  <pjones@redhat.com>

	* pm-action: add copyright and license notice.
	* Makefile: Add pm-pmu.c and pm-pmu.1 .
	* Makefile: Change CFLAGS; -g and friends should come from
	RPM_OPT_FLAGS when desired.
	* pm-pmu.c: suspend helper for b0rked macs.
	* pm-pmu.1: man page
	* pm/functions (pm_main): try pm-pmu before echoing stuff

2006-05-01  Peter Jones  <pjones@redhat.com>

	* Makefile: add "make test-archive"
	* pm/functions: handle an empty config.d correctly

2006-05-01  Peter Jones  <pjones@redhat.com>

	* Makefile: don't remove on_ac_power in "make clean"

2006-04-28  Peter Jones  <pjones@redhat.com>

	* Makefile: don't build on_ac_power
	* on_ac_power: add shell version of this
	* on_ac_power.c: no longer needed.

2006-04-28  Peter Jones  <pjones@redhat.com>

	* pm/hooks/05led: Resurrect this
	* pm/hooks/95led: ditto
	* pm/hooks/95ibm_led: remove this; it changes the behavior incorrectly.

2006-04-28  Richard Hughes  <richard@hughsie.com>

	* pm/functions-ati:
	* pm/functions-intel:
	* pm/functions-nvidia:
	Remove these files as we've now agreed that this belongs in HAL, and
	a HAL patch is close to being accepted.

2006-04-28  Richard Hughes  <richard@hughsie.com>

	* pm/hooks/05led: Remove this file as we want the led to turn on at
	the *end* of the hooks stuff. We shouldn't have this and 95led.

	* pm/hooks/95led: rename to 95ibm_led as this is ibm specific.
	Make sure the led blinks at suspend, and turns off when we resume.

2006-04-27  Peter Jones  <pjones@redhat.com>

	* Makefile:
	Remove references to *.app and *.pam
	* *.{app,pam}:
	Kill'em.

2006-04-27  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	Don't stop/start services unless the initscript is executable
	Use /etc/init.d/$name instead of "service", as per LSB.

2006-04-27  Peter Jones  <pjones@redhat.com>

	* pm/functions:
	Add support for /etc/pm/config.d/
	* Makefile:
	Create /etc/pm/config.d/
	* README:
	Add docs about hooks and config files

	* pm-action:
	Set LC_COLLATE=C .

2006-04-27  Richard Hughes  <richard@hughsie.com>

	* pm/functions:
	Remove the video handling logic, as it is moving to HAL.

	* pm/functions-ati:
	* pm/functions-intel:
	* pm/functions-nvidia:
	Add a comment saying that the files are unused. When HAL video stuff
	is completed, they can be removed.

	* pm/hooks/20video:
	Switch to using the HAL methods as discussed.

2006-04-26  Richard Hughes  <richard@hughsie.com>

	* Add README
	* Add AUTHORS

2006-04-26  Peter Jones  <pjones@redhat.com>

	* Add COPYING
	* Add ChangeLog
	* Add license notice in pm-action
